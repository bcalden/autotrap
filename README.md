autotrap
========
autotrap is a collection of automation utilities for use with the LOFAR Transient Pipeline (TraP - https://github.com/transientskp/tkp) and AWImager.
There are three main files used for image generation, sending the images to the TraP, and generating graphs as output. These files are image_automator.py, generate_trap.py, and graph_tools.py respectively.
The other file included, templates.py is called by generate_trap.py and contains templates for TraP parameters.
Descriptions of each with examples can be found below. For further usage information, please see the wiki - https://github.com/bcalden/autotrap/wiki.

image_automator.py
------------------
This is designed to be run from the commandline and supplied with some of the options described below. It can be imported and the functions used individually, but ideally, it is run by itself.
Before running image_automator.py, it is highly recommended to change the default parameters used in the parameter file creation. This can also be done at runtime by running with the -p option.
If you would rather change the defaults in the actual code, they are contained in the `get_input_parameters(options)` function within a dictionary named `params`.

Usage: image_automator.py [options]

**Options**

|   Option              | Long option                           | Description                                                       |
|-----------------------|---------------------------------------|-------------------------------------------------------------------|
|  -h                   | --help                                | Show the usage instruction and available options (this table)     |
|  -n number            |  --num_slices=NUM_SLICES              | Number of images to slice MS dataset into                         |
|  -m directory         |  --ms_directory=MS_FILE_DIRECTORY     | Directory containing the MS files                                 |
|  -o directory         |  --output_directory=OUTPUT_DIRECTORY  | Directory to output images to.                                    |
|  -p                   |  --input_parameters                   | Allows the user to enter the parameter file parameters one by one |
|  -d directory         |  --param_directory=PARAM_DIRECTORY    | The directory to output the parameter files to.                   |
|  -i number            |  --iterations=ITERATIONS              | Number of cleaning iterations                                     |
|  -r database          |  --rejected_images=DB_WITH_REJECTIONS | Make fits images for rejected images within the supplied database |
|  -f                   |  --fits_from_field                    | Make fits images for a field                                      |
|  -s                   |  --no_overwrite                       | Don't overwrite any of the images                                 |


**`make_images(ms_files, options, params)`**
This is the main function in image_automator. This function takes a dictionary of .MS files
(created by the `get_ms_files` function), options passed from the command line or the `get_options()` function, and
 a parameter dictionary as generated by the `get_input_parameters` function.

 This function iterates through a dictionary of MS files, generates their parameter files for use with AWImager, runs AWImager on that parameter file, and then runs addImagingInfo on the generated .restored.corr file.




generate_trap.py
----------------


templates.py
------------


graph_tools.py
--------------
